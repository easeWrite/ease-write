import{d as ae,r as y,g as ve,I as T,ao as de,w as te,a8 as O,o as ce,Q as ne,h as re,_ as N,b as w,c as B,a2 as fe,j as P,R as ie,u as ge,a as q,am as me,e as Y,X as J}from"./index.da7f9356.js";import{t as le,a as he,u as xe,f as be,C as ze,c as Se,r as X}from"./Input.ed5c0607.js";import{R as pe}from"./index.8ce1e16c.js";var ye=`
 min-height:0 !important;
 max-height:none !important;
 height:0 !important;
 visibility:hidden !important;
 overflow:hidden !important;
 position:absolute !important;
 z-index:-1000 !important;
 top:0 !important;
 right:0 !important
`,we=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],K={},b;function Ce(d){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=d.getAttribute("id")||d.getAttribute("data-reactid")||d.getAttribute("name");if(e&&K[i])return K[i];var t=window.getComputedStyle(d),g=t.getPropertyValue("box-sizing")||t.getPropertyValue("-moz-box-sizing")||t.getPropertyValue("-webkit-box-sizing"),c=parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),h=parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width")),v=we.map(function(u){return"".concat(u,":").concat(t.getPropertyValue(u))}).join(";"),l={sizingStyle:v,paddingSize:c,borderSize:h,boxSizing:g};return e&&i&&(K[i]=l),l}function Ae(d){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;b||(b=document.createElement("textarea"),b.setAttribute("tab-index","-1"),b.setAttribute("aria-hidden","true"),document.body.appendChild(b)),d.getAttribute("wrap")?b.setAttribute("wrap",d.getAttribute("wrap")):b.removeAttribute("wrap");var g=Ce(d,e),c=g.paddingSize,h=g.borderSize,v=g.boxSizing,l=g.sizingStyle;b.setAttribute("style","".concat(l,";").concat(ye)),b.value=d.value||d.placeholder||"";var u=Number.MIN_SAFE_INTEGER,f=Number.MAX_SAFE_INTEGER,s=b.scrollHeight,z;if(v==="border-box"?s+=h:v==="content-box"&&(s-=c),i!==null||t!==null){b.value=" ";var _=b.scrollHeight-c;i!==null&&(u=_*i,v==="border-box"&&(u=u+c+h),s=Math.max(u,s)),t!==null&&(f=_*t,v==="border-box"&&(f=f+c+h),z=s>f?"":"hidden",s=Math.min(f,s))}return{height:"".concat(s,"px"),minHeight:"".concat(u,"px"),maxHeight:"".concat(f,"px"),overflowY:z,resize:"none"}}var L=0,W=1,_e=2,Ie=ae({name:"ResizableTextArea",inheritAttrs:!1,props:le(),setup:function(e,i){var t=i.attrs,g=i.emit,c=i.expose,h,v,l=y(),u=y({}),f=y(L);ve(function(){T.cancel(h),T.cancel(v)});var s=function(){try{if(document.activeElement===l.value){var m=l.value.selectionStart,p=l.value.selectionEnd;l.value.setSelectionRange(m,p)}}catch(V){}},z=function(){var m=e.autoSize||e.autosize;if(!(!m||!l.value)){var p=m.minRows,V=m.maxRows;u.value=Ae(l.value,!1,p,V),f.value=W,T.cancel(v),v=T(function(){f.value=_e,v=T(function(){f.value=L,s()})})}},_=function(){T.cancel(h),h=T(z)},C=function(m){if(f.value===L){g("resize",m);var p=e.autoSize||e.autosize;p&&_()}};de(e.autosize===void 0,"Input.TextArea","autosize is deprecated, please use autoSize instead.");var E=function(){var m=e.prefixCls,p=e.autoSize,V=e.autosize,k=e.disabled,D=ne(e,["prefixCls","onPressEnter","autoSize","autosize","defaultValue","allowClear","type","lazy","maxlength","valueModifiers"]),G=re(m,t.class,N({},"".concat(m,"-disabled"),k)),j=[t.style,u.value,f.value===W?{overflowX:"hidden",overflowY:"hidden"}:null],R=w(w(w({},D),t),{style:j,class:G});return R.autofocus||delete R.autofocus,R.rows===0&&delete R.rows,B(pe,{onResize:C,disabled:!(p||V)},{default:function(){return[fe(B("textarea",P(P({},R),{},{ref:l}),null),[[he]])]}})};te(function(){return e.value},function(){O(function(){z()})}),ce(function(){O(function(){z()})});var I=ie();return c({resizeTextarea:z,textArea:l,instance:I}),function(){return E()}}}),Re=Ie;function oe(d,e){return Y(d||"").slice(0,e).join("")}function ee(d,e,i,t){var g=i;return d?g=oe(i,t):Y(e||"").length<i.length&&Y(i||"").length>t&&(g=e),g}var Fe=ae({name:"ATextarea",inheritAttrs:!1,props:le(),setup:function(e,i){var t=i.attrs,g=i.expose,c=i.emit,h=xe(),v=y(e.value===void 0?e.defaultValue:e.value),l=y(),u=y(""),f=ge("input",e),s=f.prefixCls,z=f.size,_=f.direction,C=q(function(){return e.showCount===""||e.showCount||!1}),E=q(function(){return Number(e.maxlength)>0}),I=y(!1),A=y(),m=y(0),p=function(a){I.value=!0,A.value=u.value,m.value=a.currentTarget.selectionStart,c("compositionstart",a)},V=function(a){var n;I.value=!1;var r=a.currentTarget.value;if(E.value){var x=m.value>=e.maxlength+1||m.value===((n=A.value)===null||n===void 0?void 0:n.length);r=ee(x,A.value,r,e.maxlength)}r!==u.value&&(j(r),X(a.currentTarget,a,U,r)),c("compositionend",a)},k=ie();te(function(){return e.value},function(){var o;"value"in k.vnode.props,v.value=(o=e.value)!==null&&o!==void 0?o:""});var D=function(a){var n;Se((n=l.value)===null||n===void 0?void 0:n.textArea,a)},G=function(){var a,n;(n=(a=l.value)===null||a===void 0?void 0:a.textArea)===null||n===void 0||n.blur()},j=function(a,n){v.value!==a&&(e.value===void 0?v.value=a:O(function(){var r,x,S;l.value.textArea.value!==u.value&&((S=(r=l.value)===null||r===void 0?void 0:(x=r.instance).update)===null||S===void 0||S.call(x))}),O(function(){n&&n()}))},R=function(a){a.keyCode===13&&c("pressEnter",a),c("keydown",a)},$=function(a){var n=e.onBlur;n==null||n(a),h.onFieldBlur()},U=function(a){c("update:value",a.target.value),c("change",a),c("input",a),h.onFieldChange()},ue=function(a){X(l.value.textArea,a,U),j("",function(){D()})},Q=function(a){var n=a.target.composing,r=a.target.value;if(I.value=!!(a.isComposing||n),!(I.value&&e.lazy||v.value===r)){if(E.value){var x=a.target,S=x.selectionStart>=e.maxlength+1||x.selectionStart===r.length||!x.selectionStart;r=ee(S,u.value,r,e.maxlength)}X(a.currentTarget,a,U,r),j(r)}},se=function(){var a,n,r,x=t.style,S=t.class,H=e.bordered,M=H===void 0?!0:H,F=w(w(w({},ne(e,["allowClear"])),t),{style:C.value?{}:x,class:(a={},N(a,"".concat(s.value,"-borderless"),!M),N(a,"".concat(S),S&&!C.value),N(a,"".concat(s.value,"-sm"),z.value==="small"),N(a,"".concat(s.value,"-lg"),z.value==="large"),a),showCount:null,prefixCls:s.value,onInput:Q,onChange:Q,onBlur:$,onKeydown:R,onCompositionstart:p,onCompositionend:V});return!((n=e.valueModifiers)===null||n===void 0)&&n.lazy&&delete F.onInput,B(Re,P(P({},F),{},{id:(r=F.id)!==null&&r!==void 0?r:h.id.value,ref:l,maxlength:e.maxlength}),null)};return g({focus:D,blur:G,resizableTextArea:l}),me(function(){var o=be(v.value);!I.value&&E.value&&(e.value===null||e.value===void 0)&&(o=oe(o,e.maxlength)),u.value=o}),function(){var o=e.maxlength,a=e.bordered,n=a===void 0?!0:a,r=e.hidden,x=t.style,S=t.class,H=w(w(w({},e),t),{prefixCls:s.value,inputType:"text",handleReset:ue,direction:_.value,bordered:n,style:C.value?void 0:x}),M=B(ze,P(P({},H),{},{value:u.value}),{element:se});if(C.value){var F=Y(u.value).length,Z="";J(C.value)==="object"?Z=C.value.formatter({count:F,maxlength:o}):Z="".concat(F).concat(E.value?" / ".concat(o):""),M=B("div",{hidden:r,class:re("".concat(s.value,"-textarea"),N({},"".concat(s.value,"-textarea-rtl"),_.value==="rtl"),"".concat(s.value,"-textarea-show-count"),S),style:x,"data-count":J(Z)!=="object"?Z:void 0},[M])}return M}}});export{Fe as _};

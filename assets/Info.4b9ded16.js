var W=Object.defineProperty;var b=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var x=(t,e,n)=>e in t?W(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,A=(t,e)=>{for(var n in e||(e={}))B.call(e,n)&&x(t,n,e[n]);if(b)for(var n of b(e))S.call(e,n)&&x(t,n,e[n]);return t};import{r as s,o as F,w as v,n as _,z as f,c as o,s as p,v as C,bf as D,k,bx as G,m as w}from"./index.da7f9356.js";import{C as g}from"./index.c1912c74.js";import"./index.7519a825.js";import{_ as m}from"./plugin-vue_export-helper.21dcd24c.js";import{S as U}from"./ServerInfo.75ad5e87.js";import"./index.927d4ebf.js";import"./index.ed58054b.js";import"./index.ba4aad16.js";import"./vnode.9b463a26.js";import"./index.8ce1e16c.js";import"./isEqual.2b12b11d.js";import"./useFlexGapSupport.62c1db49.js";import"./useMergedState.d639bf4b.js";import"./index.6212fd20.js";import"./isPlainObject.1d66cee1.js";const z={props:{data:Array,countField:{type:String,default:"flow"},titleField:{type:String,default:"title"},countTitle:{type:String,default:"\u5F15\u6D41"}},setup(t){let e=null;const n=s(null);return F(()=>{e=new G2.Chart({container:n.value,autoFit:!0,padding:[0,30,50,80]}),e.scale({[t.countField]:{min:0,alias:t.countTitle}}),e.axis(t.titleField,{title:null,tickLine:null,line:null}),e.axis(t.countField,{label:null,title:{offset:30,style:{fontSize:12,fontWeight:300}}}),e.legend(!1),e.coordinate().transpose(),e.interval().position(`${t.titleField}*${t.countField}`).size(26).label(t.countField,{style:{fill:"#8d8d8d"},offset:10}),e.interaction("element-active")}),v(()=>t.data,a=>{e.changeData(a)}),{dom:n}}},I={class:"chart-continer"},N={ref:"dom",class:"dom"};function V(t,e,n,a,l,u){const i=g;return _(),f("div",I,[o(i,{title:n.countTitle},{default:p(()=>[C("div",N,null,512)]),_:1},8,["title"])])}var R=m(z,[["render",V],["__scopeId","data-v-3def139e"]]);function q(t){return D({url:"/admin/flow/rank/user",params:{page:t}})}function H(t){return D({url:"/admin/flow/rank/article",params:{page:t}})}function K(t){return D({url:"/admin/flow/rank/channel",params:{page:t}})}const L={setup(){const t=k();let e=null;const n=s(null);return v(()=>t.state.hourData,a=>{e.changeData(a)}),F(()=>{e=new G2.Chart({container:n.value,autoFit:!0,height:500}),e.tooltip({showTitle:!1,title:(a,l)=>a,shared:!0,showCrosshairs:!0}),e.scale({user:{min:0}}),e.axis("user_disabled",!1),e.axis("user_lively",!1),e.axis("user_online",!1),e.legend({custom:!0,items:[{name:"\u6CE8\u518C\u7528\u6237\u6570\u91CF",value:"user",marker:{symbol:"line",style:{stroke:"#45aaff",lineWidth:2}}},{name:"\u5DF2\u7981\u7528\u7528\u6237\u6570\u91CF",value:"user_disabled",marker:{symbol:"line",style:{stroke:"#ff4d4f",lineWidth:2}}},{name:"\u6D3B\u8DC3\u7528\u6237\u6570\u91CF",value:"user_lively",marker:{symbol:"line",style:{stroke:"#52c41a",lineWidth:2}}},{name:"\u5728\u7EBF\u7528\u6237\u6570\u91CF",value:"user_online",marker:{symbol:"line",style:{stroke:"#006dff",lineWidth:2}}}]}),e.line().position("created_at*user").color("#45aaff").tooltip("user",(a,l)=>({name:"\u6CE8\u518C\u7528\u6237\u6570\u91CF",value:a})),e.line().position("created_at*user_disabled").color("#ff4d4f").tooltip("user_disabled",(a,l)=>({name:"\u5DF2\u7981\u7528\u7528\u6237\u6570\u91CF",value:a})),e.line().position("created_at*user_lively").color("#52c41a").tooltip("user_lively",(a,l)=>({name:"\u6D3B\u8DC3\u7528\u6237\u6570\u91CF",value:a})),e.line().position("created_at*user_online").color("#006dff").tooltip("user_online",(a,l)=>({name:"\u5728\u7EBF\u7528\u6237\u6570\u91CF",value:a})),e.render()}),{dom:n}}},M={ref:"dom"};function j(t,e,n,a,l,u){return _(),f("div",M,null,512)}var J=m(L,[["render",j]]);const O={setup(){const t=k();let e=null;const n=s(null);return v(()=>t.state.hourData,a=>{e.changeData(a)}),F(()=>{e=new G2.Chart({container:n.value,autoFit:!0,height:500}),e.tooltip({showTitle:!1,title:(a,l)=>a,shared:!0,showCrosshairs:!0}),e.legend({custom:!0,items:[{name:"\u6587\u7AE0\u6570\u91CF",value:"article",marker:{symbol:"line",style:{stroke:"#52c41a",lineWidth:2}}},{name:"\u5DF2\u53D1\u5E03\u6587\u7AE0\u6570\u91CF",value:"article_publish",marker:{symbol:"line",style:{stroke:"#006dff",lineWidth:2}}},{name:"\u5DF2\u5220\u9664\u6587\u7AE0\u6570\u91CF",value:"article_deleted",marker:{symbol:"line",style:{stroke:"#ff4d4f",lineWidth:2}}}]}),e.scale({article:{min:0}}),e.axis("article_publish",!1),e.axis("article_deleted",!1),e.line().position("created_at*article").color("#52c41a").tooltip("created_at*article",(a,l)=>({name:"\u6587\u7AE0\u6570\u91CF",value:l})),e.line().position("created_at*article_publish").color("#006dff").tooltip("created_at*article_publish",(a,l)=>({name:"\u5DF2\u53D1\u5E03\u6587\u7AE0\u6570\u91CF",value:l})),e.line().position("created_at*article_deleted").color("#ff4d4f").tooltip("created_at*article_deleted",(a,l)=>({name:"\u5DF2\u5220\u9664\u6587\u7AE0\u6570\u91CF",value:l})),e.render()}),{dom:n}}},P={ref:"dom"};function Q(t,e,n,a,l,u){return _(),f("div",P,null,512)}var X=m(O,[["render",Q]]);const Y={setup(){const t=k();let e=null;const n=s(null);v(()=>t.state.hourData,l=>{a(l)});function a(l){const u=[];let i="",d=0;const y=l.map(({created_at:r,flow:c})=>{const E={};return c.forEach(T=>{const{name_cn:h,flow:$}=T;u.includes(h)||u.push(h),(!i||$>d)&&(i=h,d=$),E[h]=$}),A({created_at:r},E)});e=new G2.Chart({container:n.value,autoFit:!0,height:500}),e.tooltip({showTitle:!1,title:(r,c)=>r,shared:!0,showCrosshairs:!0}),e.scale({[i]:{min:0}}),u.forEach(r=>{i!==r&&e.axis(r,!1),e.line().position(`created_at*${r}`)}),e.data(y),e.render()}return{dom:n}}},Z={ref:"dom"};function ee(t,e,n,a,l,u){return _(),f("div",Z,null,512)}var te=m(Y,[["render",ee]]);const ae={components:{ServerInfo:U,Rank:R,User:J,Article:X,Channel:te},setup(){const t=k(),e=s([]),n=s([]),a=s([]),l=s([]);return F(()=>{t.actions.getHourData(),q().then(u=>e.value=u.reverse()),H().then(u=>n.value=u.reverse()),K().then(u=>a.value=u.reverse()),G().then(u=>l.value=u.reverse())}),{userFlowRank:e,articleFlowRank:n,channelFlowRank:a,channelChannelRank:l}}},ne=C("br",null,null,-1),le=C("br",null,null,-1);function ue(t,e,n,a,l,u){const i=w("Channel"),d=g,y=w("Article"),r=w("User"),c=R;return _(),f("div",null,[C("div",null,[o(d,{title:"\u6E20\u9053\u5C0F\u65F6\u5F15\u6D41"},{default:p(()=>[o(i)]),_:1}),ne,o(d,{title:"\u6587\u7AE0\u5C0F\u65F6\u6570\u636E"},{default:p(()=>[o(y)]),_:1}),le,o(d,{title:"\u7528\u6237\u5C0F\u65F6\u6570\u636E"},{default:p(()=>[o(r)]),_:1})]),o(c,{data:a.userFlowRank,countTitle:"\u7528\u6237\u5F15\u6D41Top10"},null,8,["data"]),o(c,{data:a.articleFlowRank,countTitle:"\u6587\u7AE0\u5F15\u6D41Top10"},null,8,["data"]),o(c,{data:a.channelFlowRank,countTitle:"\u6E20\u9053\u5F15\u6D41Top10"},null,8,["data"]),o(c,{data:a.channelChannelRank,countField:"articleCount",countTitle:"\u6E20\u9053\u6587\u7AE0\u6570Top10"},null,8,["data"])])}var $e=m(ae,[["render",ue]]);export{$e as default};
